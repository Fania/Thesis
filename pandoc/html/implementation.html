<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimal-ui">

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-barstyle" content="black-translucent">
  <link rel="apple-touch-icon" href="../images/icon.png">
  <meta name="apple-mobile-web-app-title" content="PataPhD">
  <link rel="icon" href="../images/favicon.ico" />
  
  <title>Implementation</title>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link href="../htmlstyle.css" rel="stylesheet">
  <script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
	<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]},
											TeX:     {extensions: ["color.js"],
																Macros:     {RR:    '{\\bf R}',
												                     bold:  ['{\\bf #1}', 1]}
															 }
										 });
	</script>
</head>
<body>
<nav class="mainnav">
  <a class="left" href="part4.html">Prev</a>
  <a class="centre" href="contents.html">Contents</a>
  <a class="right" href="applications.html">Next</a>
</nav>

<section id="ch:implementation" class="level1">
<h1><span class="header-section-number">10</span> Implementation</h1>
<nav id="TOC">
<ul>
<li><a href="#ch:implementation"><span class="toc-section-number">10</span> Implementation</a><ul>
<li><a href="#s:setup"><span class="toc-section-number">10.1</span> Setup</a><ul>
<li><a href="#s:corpora"><span class="toc-section-number">10.1.1</span> Corpora</a></li>
<li><a href="#s:index"><span class="toc-section-number">10.1.2</span> Index</a></li>
</ul></li>
<li><a href="#s:algorithms"><span class="toc-section-number">10.2</span> Text</a><ul>
<li><a href="#s:clinamenalgo"><span class="toc-section-number">10.2.1</span> Clinamen</a></li>
<li><a href="#s:ressent"><span class="toc-section-number">10.2.2</span> Result Sentences</a></li>
<li><a href="#s:syzygyalgo"><span class="toc-section-number">10.2.3</span> Syzygy</a></li>
<li><a href="#s:antinomyalgo"><span class="toc-section-number">10.2.4</span> Antinomy</a></li>
<li><a href="#s:formalisation"><span class="toc-section-number">10.2.5</span> Formalisation</a></li>
</ul></li>
<li><a href="#s:imgvid"><span class="toc-section-number">10.3</span> Image &amp; Video</a><ul>
<li><a href="#s:api"><span class="toc-section-number">10.3.1</span> REST &amp; API</a></li>
</ul></li>
<li><a href="#design"><span class="toc-section-number">10.4</span> Design</a><ul>
<li><a href="#s:poetry"><span class="toc-section-number">10.4.1</span> Poetry</a></li>
<li><a href="#lists"><span class="toc-section-number">10.4.2</span> Lists</a></li>
<li><a href="#s:spiral"><span class="toc-section-number">10.4.3</span> Spiral</a></li>
</ul></li>
<li><a href="#s:prototypes"><span class="toc-section-number">10.5</span> Prototypes</a></li>
</ul></li>
<li><a href="#bibliography">References</a></li>
</ul>
</nav>

<section class="poem">
<code>Craft against vice I must apply,</code><br />
<code>you will compel me then to read the will,</code><br />
<code>this man so complete,</code><br />
<code>for when thou gav’st them the rod.</code><br />
<br />
<code>A saw a flea stick upon Bardolph’s nose,</code><br />
<code>god may finish it when he will,</code><br />
<code>deserved thy beauty’s use,</code><br />
<code>you do surely bar the door upon your own liberty.</code><br />
<br />
<code>My heart thy picture’s sight would bar,</code><br />
<code>and finish all foul thoughts,</code><br />
<code>to dark dishonour’s use thou shalt not have.</code><br />
<br />
<code>Their ruth and let me use my sword,</code><br />
<code>my bare fists I would execute,</code><br />
<code>is the young Dauphin every way complete.</code>
</section>

<figure id="fig:10.1">
<img src="../images/fullscreenshot.png" alt="Screenshot of pata.physics.wtf"/>
<figcaption>Figure 10.1 - Screenshot of <a href="http://pata.physics.wtf" class="uri">pata.physics.wtf</a></figcaption>
</figure>

<figure id="fig:10.2">
<img src="../images/fig102.png" alt="Project directory"/>
<figcaption>Figure 10.2 - Project directory</figcaption>
</figure>

<p>The website <a href="http://pata.physics.wtf" class="uri">pata.physics.wtf</a> (see image <a href="#gif:10.1">10.1</a>) embodies the knowledge of this doctoral research and showcases Algorithmic Meta-Creativity (AMC) and patalgorithms. This chapter gives an overview of the structure of the website and the development process.</p>
<p>A high level view of the site would be that it is a pataphysical search engine that subverts conventional expectations by recombining literary texts into emergent user directed and ephemeral poetical structures or unpredictable spirals of pataphysicalised visual media.</p>
<p>It is written in 5 different programming languages<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>, making calls to 6 external web services<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a>, in a total of over lines of code<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a> spread over 30 key files.</p>
<p>Typically, software development is divided into so-called front- and back-ends. The front-end includes web design and web development and is meant to provide an interface for the end-user to communicate with the back-end which involves a server, an application and a database (although this is not fully the case in this project).</p>
<p>The front-end design uses the <em>W3.CSS</em> stylesheet <span class="citation" data-cites="w3css">(“W3.CSS Tutorial. Faster and Better Responsive Websites” n.d.)</span> as a basis. The website is mostly responsive (see image <a href="#fig:10.6">10.6</a>), meaning it can be viewed well on phones, tablets and desktop screens (the poems and image spirals for example unfortunately have a fixed width which does not scale down well). The site contains various scripts written in <strong>JavaScript</strong> (e.g. scramble letters, randomise poem, send email and tabbed content).</p>
<p>The backend relies heavily on a <strong>Python</strong> <span class="citation" data-cites="pythonmain">(“Python” n.d.)</span> framework called <strong>Flask</strong> <span class="citation" data-cites="Ronacher2016">(Ronacher n.d.)</span>. Most of the code is written in Python although some parts require a specific templating language called <strong>Jinja</strong> <span class="citation" data-cites="Jinja2016">(Ronacher <a href="#ref-Jinja2016">2008</a>)</span> which renders content into HTML. The application uses several APIs (Microsoft Translator, Bing, YouTube, Flickr, Getty and WordNet) and is version controlled using <strong>Git</strong> <span class="citation" data-cites="Git2016">(Git <a href="#ref-Git2016">2016</a>)</span>.</p>
<p>The folder structure is shown in figure <a href="#fig:10.3">10.3</a>. Each spot represents one file.</p>
<br>

<figure id="fig:10.3">
<img src="../images/fig103.png" alt="Folder structure and file types" />
<figcaption>Figure 10.3 - Folder structure and file types</figcaption>
</figure>

<p>Figures <a href="#fig:10.4">10.4</a> and <a href="#fig:10.5">10.5</a> show the two main workflow scenarios of <a href="http://pata.physics.wtf" class="uri">pata.physics.wtf</a> in the form of sequence diagrams. The columns are labeled with the main agents (this includes the user and the various main files responsible for key actions in the system). Going down vertically represents time.</p>
<p>Figure <a href="#fig:10.4">10.4</a> demonstrates an outline of how the text search process works. A user enters a query into a search box in the <code>text.html</code> file which is rendered by the <code>textviews.py</code> file. Then it gets forwarded to the <code>textsurfer.py</code> file which then handles the pataphysicalisation process and returns patadata back to <code>textviews.py</code>. This python file then passes it on to the <code>textresults.html</code> file which retrieves and renders the results to the user. The user then has the option to randomise the results (if displayed as a poem) which is handled by the <code>fania.js</code> file. A very similar process is in place for image and video search as shown in figure  <a href="#fig:10.5">10.5</a>. The main difference is the results are retrieved in the file rather than the <code>imgresults.html</code> file.</p>

<figure class="half" id="fig:10.4">
<img src="../images/fig104.png" alt="Top-level overview of text search" />
<figcaption>Figure 10.4 - Top-level overview of text search</figcaption>
</figure>

<figure class="half" id="fig:10.5">
<img src="../images/fig105.png" alt="Top-level overview of image / video search" />
<figcaption>Figure 10.5 - Top-level overview of image / video search</figcaption>
</figure>

<p>Putting it another way, (1) the system setup tokenises each of the source texts, removes stopwords and then adds terms and their location to the index (see section <a href="#s:index">10.1.2</a>), (2) a query then triggers the three pataphysical algorithms, (3) each algorithm finds results for the query (see section <a href="#s:algorithms">10.2</a>), (4) some words before/after the match are retrieved for context, and (5) the resulting sentences are rendered for the user.</p>

<img class="triplespiral" src="../images/triplespiral.png">

<p>The following sections discuss the initial setup of the system when it is first started up, the text search algorithms, the image and video API calls and the main design elements (text poetry and image spirals).</p>

<section id="s:setup" class="level2">
<h2><span class="header-section-number">10.1</span> Setup</h2>
<p>The Python web framework Flask <span class="citation" data-cites="Ronacher2016">(Ronacher n.d.)</span> looks after loading and rendering the various pages for <a href="http://pata.physics.wtf" class="uri">pata.physics.wtf</a> (home, text-search, text-results, image-search, image-results, video-search, video-results, about and errors), which means most of the backend related code is written in Python. Although Flask contains a small development server, in a production environment a more capable server is needed. For this reason the Flask site runs on a Gunicorn server <span class="citation" data-cites="Gunicorn2016">(“Gunicorn: Python Wsgi Http Server for Unix” n.d.)</span> and is hosted on a UNIX machine.</p>

<section id="s:corpora" class="level3">
<h3><span class="header-section-number">10.1.1</span> Corpora</h3>
<p>Instead of crawling the Internet <a href="http://pata.physics.wtf" class="uri">pata.physics.wtf</a> uses a local collection of texts for its text search. Setting up a custom web crawler would require a lot more resources (in terms of hardware, time and money) than practical for this project. There are two corpora containing 65 text files together.</p>
<p>The first corpus resembles the fictional library of ‘equivalent books’ from Jarry’s <em>Exploits and Opinions of Dr. Faustroll, <span class="math inline">′</span>Pataphysician</em> <span class="citation" data-cites="Jarry1996">(<a href="#ref-Jarry1996">1996</a>)</span>. In principle the corpus is just a folder within the tool’s directory structure containing the following files:</p>
<ol>
<li><p>Alfred Jarry: <em>Exploits and Opinions of Dr. Faustroll, <span class="math inline">′</span>Pataphysician</em> <span class="citation" data-cites="Jarry1996">(<a href="#ref-Jarry1996">1996</a>)</span></p></li>
<li><p>Edgar Allen Poe: <em>Collected Works</em> <span class="citation" data-cites="Poe2008">(<a href="#ref-Poe2008">2008</a>)</span></p></li>
<li><p>Cyrano de Bergerac: <em>A Voyage to the Moon</em> <span class="citation" data-cites="Bergerac2014">(<a href="#ref-Bergerac2014">2014</a>)</span></p></li>
<li><p>Saint Luke: <em>The Gospel</em> <span class="citation" data-cites="Bergerac2014">(<a href="#ref-Bergerac2014">2014</a>)</span></p></li>
<li><p>L<span>é</span>on Bloy: <em>Le D<span>é</span>sesp<span>é</span>r<span>é</span></em> (French) <span class="citation" data-cites="Bloy2011">(<a href="#ref-Bloy2011">2011</a>)</span></p></li>
<li><p>Samuel Taylor Coleridge: <em>The Rime of the Ancient Mariner</em> <span class="citation" data-cites="Coleridge2013">(<a href="#ref-Coleridge2013">2013</a>)</span></p></li>
<li><p>Georges Darien: <em>Le Voleur</em> (French) <span class="citation" data-cites="Darien2005">(<a href="#ref-Darien2005">2005</a>)</span></p></li>
<li><p>Marceline Desbordes-Valmore: <em>Le Livre des M<span>è</span>res et des Enfants</em> (French) <span class="citation" data-cites="Desbordes2004">(<a href="#ref-Desbordes2004">2004</a>)</span></p></li>
<li><p>Max Elskamp: <em>Enluminures</em> (French) <span class="citation" data-cites="Elskamp1898">(<a href="#ref-Elskamp1898">1898</a>)</span></p></li>
<li><p>Jean-Pierre Claris de Florian: <em>Les Deux Billets</em> (French) <span class="citation" data-cites="Florian2012">(<a href="#ref-Florian2012">2012</a>)</span></p></li>
<li><p><em>One Thousand and One Nights</em> <span class="citation" data-cites="Lang2008">(Lang <a href="#ref-Lang2008">2008</a>)</span></p></li>
<li><p>Christian Grabbe: <em>Scherz, Satire, Ironie und tiefere Bedeutung</em> (German) <span class="citation" data-cites="Grabbe1995">(<a href="#ref-Grabbe1995">1995</a>)</span></p></li>
<li><p>Gustave Kahn: <em>Le Conte de l’Or et Du Silence</em> (French) <span class="citation" data-cites="Kahn2016">(n.d.)</span></p></li>
<li><p>Le Comte de Lautr<span>é</span>amont: <em>Les Chants de Maldoror</em> (French) <span class="citation" data-cites="Lautreamont2011">(<a href="#ref-Lautreamont2011">2011</a>)</span></p></li>
<li><p>Maurice Maeterlinck: <em>Aglavaine and S<span>é</span>lysette</em> <span class="citation" data-cites="Maeterlinck1918">(<a href="#ref-Maeterlinck1918">1918</a>)</span></p></li>
<li><p>St<span>é</span>phane Mallarm<span>é</span>: <em>Verse and Prose</em> (French) <span class="citation" data-cites="Mallarme2003">(<a href="#ref-Mallarme2003">2003</a>)</span></p></li>
<li><p>Catulle Mend<span>è</span>s: <em>The Mirror</em> and <em>la Divina Aventure</em> (English and Spanish) <span class="citation" data-cites="Mendes1910 Mendes2013">(<a href="#ref-Mendes1910">1910</a>; <a href="#ref-Mendes2013">2013</a>)</span></p></li>
<li><p>Homer: <em>The Odyssey</em> <span class="citation" data-cites="Homer1999">(<a href="#ref-Homer1999">1999</a>)</span></p></li>
<li><p>Jos<span>é</span>phin P<span>é</span>ladan: <em>Babylon</em> (EMPTY FILE)<a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a></p></li>
<li><p>François Rabelais: <em>Gargantua and Pantagruel</em> <span class="citation" data-cites="Rabelais2004">(<a href="#ref-Rabelais2004">2004</a>)</span></p></li>
<li><p>Jean de Chilra: <em>L’Heure Sexuelle</em> (EMPTY FILE)<sup>[emptyfile]</sup></p></li>
<li><p>Henri de R<span>é</span>gnier: <em>La Canne de Jaspe</em> (EMPTY FILE)<sup>[emptyfile]</sup></p></li>
<li><p>Arthur Rimbaud: <em>Poesies Completes</em> (French) <span class="citation" data-cites="Rimbaud2009">(<a href="#ref-Rimbaud2009">2009</a>)</span></p></li>
<li><p>Marcel Schwob: <em>Der Kinderkreuzzug</em> (German) <span class="citation" data-cites="Schwob2012">(<a href="#ref-Schwob2012">2012</a>)</span></p></li>
<li><p>Alfred Jarry: <em>Ubu Roi</em> (French) <span class="citation" data-cites="Jarry2005">(<a href="#ref-Jarry2005">2005</a>)</span></p></li>
<li><p>Paul Verlaine: <em>Poems</em> <span class="citation" data-cites="Verlaine2009">(<a href="#ref-Verlaine2009">2009</a>)</span></p></li>
<li><p>Emile Verhaeren: <em>Poems</em> <span class="citation" data-cites="Verhaeren2010">(<a href="#ref-Verhaeren2010">2010</a>)</span></p></li>
<li><p>Jules Verne: <em>A Journey to the Centre of the Earth</em> <span class="citation" data-cites="Verne2010">(<a href="#ref-Verne2010">2010</a>)</span></p></li>
</ol>
<p>The original list as it appears in ‘Faustroll’ is shown in chapter <a href="inspirations.html#s:faustlib">2.2</a>. Three of the items have not been found as a resource. Some others have been approximated by using another text by the same author for example. Most of these were sourced from <em>Project Gutenberg</em> <span class="citation" data-cites="Gutenberg2016">(“Free Ebooks” <a href="#ref-Gutenberg2016">2016</a>)</span> in their original languages. The decision to get foreign language texts was partially due to the lack of out-of-copyright translated versions and partially because the original library in ‘Faustroll’ was also multi-lingual.</p>
<p><strong>A note on copyright:</strong> UK copyright law states in section 5 that the duration of copyright for “literary, dramatic, musical or artistic works” is “70 years from the end of the calendar year in which the last remaining author of the work dies” <span class="citation" data-cites="Copyright2015">(“UK Copyright Law. Factsheet No. P-01” <a href="#ref-Copyright2015">2015</a>)</span>. Maurice Maeterlinck and Marguerite Vallette-Eymery (a.k.a. Rachilde or Jean de Chilra) died less than 70 years ago and their work should still be under copyright. Alfred Jarry in the Simon Watson Taylor translation is a derivative work and is probably also still protected. However, copyright does not apply when used for “private and research study purposes” as stated in section 7 on <em>Fair dealing</em> of <span class="citation" data-cites="Copyright2012">(“Derivative Works. Factsheet No. P-22” <a href="#ref-Copyright2012">2012</a>)</span>.</p>
<p>The second corpus is a collection of 38 texts by William Shakespeare <span class="citation" data-cites="Shakespeare2011">(<a href="#ref-Shakespeare2011">2011</a>)</span>.</p>
<ol>
<li><p><em>The Sonnets</em></p></li>
<li><p><em>Alls Well That Ends Well</em></p></li>
<li><p><em>The Tragedy of Antony and Cleopatra</em></p></li>
<li><p><em>As You Like It</em></p></li>
<li><p><em>The Comedy of Errors</em></p></li>
<li><p><em>The Tragedy of Coriolanus</em></p></li>
<li><p><em>Cymbeline</em></p></li>
<li><p><em>The Tragedy of Hamlet, Prince of Denmark</em></p></li>
<li><p><em>The First Part of King Henry the Fourth</em></p></li>
<li><p><em>The Second Part of King Henry the Fourth</em></p></li>
<li><p><em>The Life of Kind Henry the Fifth</em></p></li>
<li><p><em>The First Part of Henry the Sixth</em></p></li>
<li><p><em>The Second Part of Henry the Sixth</em></p></li>
<li><p><em>The Third Part of Henry the Sixth</em></p></li>
<li><p><em>King Henry the Eigth</em></p></li>
<li><p><em>King John</em></p></li>
<li><p><em>The Tragedy of Julius Caesar</em></p></li>
<li><p><em>The Tragedy of King Lear</em></p></li>
<li><p><em>Love’s Labour’s Lost</em></p></li>
<li><p><em>The Tragedy of Macbeth</em></p></li>
<li><p><em>Measure for Measure</em></p></li>
<li><p><em>The Merchant of Venice</em></p></li>
<li><p><em>The Merry Wives of Windsor</em></p></li>
<li><p><em>A Midsummer Night’s Dream</em></p></li>
<li><p><em>Much Ado About Nothing</em></p></li>
<li><p><em>The Tragedy of Othello, Moor of Venice</em></p></li>
<li><p><em>King Richard the Second</em></p></li>
<li><p><em>Kind Richard III</em></p></li>
<li><p><em>The Tragedy of Romeo and Juliet</em></p></li>
<li><p><em>The Taming of the Shrew</em></p></li>
<li><p><em>The Tempest</em></p></li>
<li><p><em>The Life of Timon of Athens</em></p></li>
<li><p><em>The Tragedy of Titus Andronicus</em></p></li>
<li><p><em>The History of Troilus and Cressida</em></p></li>
<li><p><em>Twelfth Night or What You Will</em></p></li>
<li><p><em>The Two Gentlemen of Verona</em></p></li>
<li><p><em>The Winter’s Tale</em></p></li>
<li><p><em>A Lover’s Complaint</em></p></li>
</ol>
</section>

<section id="s:index" class="level3">
<h3><span class="header-section-number">10.1.2</span> Index</h3>
<p>When the server is first started various setup functions (such as the creation of the index) are executed before any HTML is rendered. The search algorithms are triggered once a user enters a search term into the query field on any of the text, image or video pages.</p>
<p>Each plain text file in the corpus is added to the internal library one by one. Source <a href="#code:10.1">10.1</a> shows how this is done. The <code>PlaintextCorpusReader</code> is a feature of the NLTK Python library <span class="citation" data-cites="NLTK2016">(“Natural Language Toolkit. NLTK 3.0 Documentation” n.d.)</span> for Natural Language Processing (NLP). The <code>words</code> function tokenises the text, i.e. it splits it into individual words and stores them as an ordered list.</p>

<div class="sourceCode">
<figure id="code:10.1">
<pre class="sourceCode python">
<code class="sourceCode python scrollbar">library <span class="op">=</span> PlaintextCorpusReader(corpus_root, <span class="st">&#39;.*\.txt&#39;</span>)
l_00 <span class="op">=</span> library.words(<span class="st">&#39;00.faustroll.txt&#39;</span>)
l_01 <span class="op">=</span> library.words(<span class="st">&#39;01.poe1.txt&#39;</span>)
...
l_27 <span class="op">=</span> library.words(<span class="st">&#39;27.verne.txt&#39;</span>)</code></pre>
<figcaption>Code 10.1 – Adding text files to the corpus library</figcaption>
</figure>
</div>

<p>The <code>setupcorpus</code> function (see source <a href="#code:10.2">10.2</a>) is called for each of the text files in the two corpora to populate the index data structures <code>l_dict</code> (for the Faustroll vocabulary) and <code>s_dict</code> (for the Shakespeare vocabulary).</p>

<pre class="text"><code>dict = dictionary { dictionary { list [ ] } }</code></pre>

<p>A dictionary in Python is what is known as an ‘associative array’ in other languages. Essentially they are unordered sets of <em>key: value</em> pairs. The <code>dict</code> used here is a dictionary where each key has another dictionary as it’s value. Each nested dictionary has a list as the value for each key.</p>

<div class="sourceCode">
<figure id="code:10.2">
<pre class="sourceCode python"><code class="sourceCode python scrollbar"><span class="co"># f = input text</span>
<span class="co"># lang = stopwords</span>
<span class="co"># dic = dictionary</span>
<span class="co"># d = &#39;l&#39; for Faustroll or &#39;s&#39; for Shakespeare</span>
<span class="kw">def</span> setupcorpus(f, lang, dic, d):
  <span class="co"># x = counter, w = word in file f</span>
  <span class="cf">for</span> x, w <span class="kw">in</span> <span class="bu">enumerate</span>(f):
    <span class="cf">if</span> w.isalpha() <span class="kw">and</span> (w.lower() <span class="kw">not</span> <span class="kw">in</span> lang):
      y <span class="op">=</span> d <span class="op">+</span> <span class="st">&#39;_&#39;</span> <span class="op">+</span> (re.search(<span class="vs">r&quot;((\d\d).(\w)+.txt)&quot;</span>, f.fileid)).group(<span class="dv">2</span>)
      dic[w.lower()][y].append(x)</code></pre>
<figcaption>Code 10.2 – ‘setupcorpus’: processing a text file and adding to the index—Python</figcaption>
</figure></div>

<p>Line 7 in source <a href="#code:10.2">10.2</a> starts looping through file <code>f</code>. Line 8 checks if the current word <code>w</code> contains anything other than alphabetical characters and whether or not <code>w</code> is contained in the relevant stop-word file <code>lang</code> (for a list of English stopwords see appendix [s:stopwords]). If both of those conditions are true, a variable <code>y</code> is created on line 9 (such as ‘l_00’ based on ‘00.faustroll.txt’) and <code>w</code> is added to the relevant dictionary file <code>dic</code> together with <code>y</code> and the current position <code>x</code> on line 10. After all files are processed, the two index structures look roughly like this:</p>
<pre class="text"><code>{
  word1: {fileA: [pos1, pos2, ...], fileB: [pos], ...},
  word2: {fileC: [pos1, pos2], fileK: [pos], ...},
  ...
}</code></pre>
<p>Using one of the terms from figure <a href="technology.html#fig:6.2">6.2</a> as an example, here are their entries in the index file (the files are represented by their number in the corpus, i.e. <code>l_00</code> is the ‘Faustroll’ file, <code>l_01</code> is the ‘Poe’ file, etc.). An excerpt from the actual <code>l_dict</code> can be found in the appendix [s:appindex].</p>
<pre class="text"><code>{
  doctor: {
    l_00: [253, 583, 604, 606, 644, 1318, 1471, 1858, 2334, 2431, 2446, 3039, 4743, 5034, 5107, 5437, 5824, 6195, 6228, 6955, 7305, 7822, 7892, 10049, 10629, 11055, 11457, 12059, 13978, 14570, 14850, 15063, 15099, 15259, 15959, 16193, 16561, 16610, 17866, 19184, 19501, 19631, 21806, 22570, 24867],
    l_01: [96659, 294479, 294556, 294648, 296748, 316773, 317841, 317854, 317928, 317990, 318461, 332118, 338470, 340548, 341252, 383921, 384136, 452830, 453015, 454044, 454160, 454421, 454596, 454712, 454796, 454846, 455030, 455278, 455760, 455874, 456023, 456123, 456188, 456481, 456796, 457106, 457653, 457714, 457823, 457894, 458571, 458918, 458998, 459654, 459771, 490749],
    l_02: [11476, 12098, 28151, 36270], ...
  }, ...
}</code></pre>
</section>
</section>

<section id="s:algorithms" class="level2">
<h2><span class="header-section-number">10.2</span> Text</h2>
<p>After the setup stage is completed and the webpage is fully loaded, user input in the form of a text query is required to trigger the three pataphysical algorithms.</p>
<p>Image and video search do not use all three algorithms — where relevant this is highlighted in each section. Generally the following descriptions refer to the text search functionality only.</p>
<p>Figure <a href="#fig:10.4">10.4</a> previously showed the rough sequence of events in text search and highlighted that the pataphysicalisation from query to patadata happens in the <code>textsurfer.py</code> Python script file.</p>
  
<section id="s:clinamenalgo" class="level3">
<h3><span class="header-section-number">10.2.1</span> Clinamen</h3>
  <p>The clinamen was introduced in chapter <a href="pataphysics.html#s:clinamen">4.2.5</a> but to briefly summarise it, it is the unpredictable swerve that Bök calls “the smallest possible aberration that can make the greatest possible difference” <span class="citation" data-cites="Bok2002">(<a href="#ref-Bok2002">2002</a>)</span>.</p>
<blockquote>
<p>Like all digitally encoded information, it has unavoidably the uncomfortable property that the smallest possible perturbations —i.e. changes of a single bit— can have the most drastic consequences.</p><span class="blockcitation" data-cites="Dijkstra1988">(Dijkstra <a href="#ref-Dijkstra1988">1988</a>)</span>
</blockquote>
<p>In simple terms, the clinamen algorithm works in two steps:</p>
<ol>
<li><p>get clinamen words based on dameraulevenshtein and faustroll text,</p></li>
<li><p>get sentences from corpus that match clinamen words.</p></li>
</ol>
<p>It uses the <em>Faustroll</em> <span class="citation" data-cites="Jarry1996">(Jarry <a href="#ref-Jarry1996">1996</a>)</span> as a base document and the Damerau-Levenshtein algorithm <span class="citation" data-cites="Damerau1964 Levenshtein1966">(Damerau <a href="#ref-Damerau1964">1964</a>; Levenshtein <a href="#ref-Levenshtein1966">1966</a>)</span> (which measures the distance between two strings (with 0 indicating equality) to find words that are similar but not quite the same. The distance is calculated using insertion, deletion, substitution of a single character, or transposition of two adjacent characters. This means that we are basically forcing the program to return matches that are of distance two or one, meaning they have two or one spelling errors in them.</p>
  
<div class="sourceCode">
<figure id="code:10.3">
<pre class="sourceCode python"><code class="sourceCode python scrollbar"><span class="co"># w = query word</span>
<span class="co"># c = corpus</span>
<span class="co"># i = assigned distance</span>
<span class="kw">def</span> clinamen(w, c, i):
  <span class="co"># l_00 = Faustroll text</span>
  words <span class="op">=</span> <span class="bu">set</span>([term <span class="cf">for</span> term <span class="kw">in</span> l_00 <span class="cf">if</span> dameraulevenshtein(w, term) <span class="op">&lt;=</span> i])
  out, sources, total <span class="op">=</span> get_results(words, <span class="st">&#39;Clinamen&#39;</span>, c)
  <span class="cf">return</span> out, words, sources, total</code></pre>
<figcaption>Code 10.3 – ‘clinamen’: pataphysicalising a query term—Python</figcaption>
</figure>
</div>
  
<p>Source <a href="#code:10.3">10.3</a> line 6 creates the set of clinamen words using a list comprehension. It retrieves matches from the Faustroll file <code>l_00</code> with the condition that they are of Damerau-Levenshtein distance <code>i</code> or less to the query term <code>w</code> (see source <a href="#code:10.4">10.4</a>). Duplicates are removed. Line 7 then makes a call to the generic <code>get_results</code> function to get all relevant result sentences, the list of source files and the total number of results.</p>

<div class="sourceCode">
<figure id="code:10.4">
<pre class="sourceCode python"><code class="sourceCode python scrollbar"><span class="co"># Michael Homer 2009</span>
<span class="co"># MIT license</span>
<span class="kw">def</span> dameraulevenshtein(seq1, seq2):
  oneago <span class="op">=</span> <span class="va">None</span>
  thisrow <span class="op">=</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">len</span>(seq2) <span class="op">+</span> <span class="dv">1</span>) <span class="op">+</span> [<span class="dv">0</span>]
  <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">xrange</span>(<span class="bu">len</span>(seq1)):
    twoago, oneago, thisrow <span class="op">=</span> oneago, thisrow, [<span class="dv">0</span>] <span class="op">*</span> <span class="bu">len</span>(seq2) <span class="op">+</span> [x <span class="op">+</span> <span class="dv">1</span>]
    <span class="cf">for</span> y <span class="kw">in</span> <span class="bu">xrange</span>(<span class="bu">len</span>(seq2)):
      delcost <span class="op">=</span> oneago[y] <span class="op">+</span> <span class="dv">1</span>
      addcost <span class="op">=</span> thisrow[y <span class="op">-</span> <span class="dv">1</span>] <span class="op">+</span> <span class="dv">1</span>
      subcost <span class="op">=</span> oneago[y <span class="op">-</span> <span class="dv">1</span>] <span class="op">+</span> (seq1[x] <span class="op">!=</span> seq2[y])
      thisrow[y] <span class="op">=</span> <span class="bu">min</span>(delcost, addcost, subcost)
      <span class="cf">if</span> (x <span class="op">&gt;</span> <span class="dv">0</span> <span class="kw">and</span> y <span class="op">&gt;</span> <span class="dv">0</span> <span class="kw">and</span> seq1[x] <span class="op">==</span> seq2[y <span class="op">-</span> <span class="dv">1</span>] <span class="kw">and</span>
        seq1[x <span class="op">-</span> <span class="dv">1</span>] <span class="op">==</span> seq2[y] <span class="kw">and</span> seq1[x] <span class="op">!=</span> seq2[y]):
          thisrow[y] <span class="op">=</span> <span class="bu">min</span>(thisrow[y], twoago[y <span class="op">-</span> <span class="dv">2</span>] <span class="op">+</span> <span class="dv">1</span>)
  <span class="cf">return</span> thisrow[<span class="bu">len</span>(seq2) <span class="op">-</span> <span class="dv">1</span>]</code></pre>
<figcaption>Code 10.4 – Damerau-Levenshtein algorithm (M. Homer 2009)—Python</figcaption>
</figure>
</div>
  
<p>The clinamen algorithm mimics the unpredictable swerve, the smallest possible aberration that can make the greatest possible difference, or the smallest possible perturbations with the most drastic consequences.</p>
</section>

<section id="s:ressent" class="level3">
<h3><span class="header-section-number">10.2.2</span> Result Sentences</h3>

<div class="sourceCode">
<figure id="code:10.5">
<pre class="sourceCode python"><code class="sourceCode python scrollbar"><span class="co"># words = patadata words</span>
<span class="co"># algo = name of algorithm</span>
<span class="co"># corp = name of corpus</span>
<span class="kw">def</span> get_results(words, algo, corp):
  total <span class="op">=</span> <span class="dv">0</span>
  out, sources <span class="op">=</span> <span class="bu">set</span>(), <span class="bu">set</span>()
  <span class="cf">for</span> r <span class="kw">in</span> words:
    <span class="cf">if</span> corp <span class="op">==</span> <span class="st">&#39;faustroll&#39;</span>: files <span class="op">=</span> l_dict[r]
    <span class="cf">else</span>: files <span class="op">=</span> s_dict[r]
    <span class="co"># e = current file</span>
    <span class="co"># p = list of positions for term $r$ in file $e$</span>
    <span class="cf">for</span> e, p <span class="kw">in</span> files.items():
      f <span class="op">=</span> get_title(e)
      sources.add(f)
      o <span class="op">=</span> (f, pp_sent(r.lower(), e, p), algo)
      total <span class="op">+=</span> <span class="dv">1</span>
      out.add(o)
  <span class="cf">return</span> out, sources, total</code></pre>
<figcaption>Code 10.5 – ‘get_results’: retrieving all sentences for a list of words—Python</figcaption>
</figure>
</div>

<p>The <code>get_results</code> function (see source <a href="#code:10.5">10.5</a>) is used by all three text algorithms (clinamen, syzygy and antinomy). Given the nested structure of the indexes <code>l_dict</code> and <code>s_dict</code>, the function loops through each of the <code>words</code> passed to it (<code>r</code>) first and then each file in <code>files.items()</code>. Lines 8 and 9 retrieve the dictionary of files for term <code>r</code> from the relevant dictionary. Line 13 gets the author and full title of file and adds it to the list of sources in line 14. Line 15 makes use of another function called <code>pp_sent</code> (see source <a href="#code:10.6">10.6</a>) to get an actual sentence fragment for the current word <code>r</code> in file <code>e</code> , which is then added to the output. The output is structured as a triple containing the author and title, the list of resulting sentences and the name of the algorithm used.</p>
  
<div class="sourceCode">
<figure id="code:10.6">
<pre class="sourceCode python"><code class="sourceCode python scrollbar"><span class="co"># w = the word (lower case)</span>
<span class="co"># f = the file</span>
<span class="co"># p = the list of positions</span>
<span class="kw">def</span> pp_sent(w, f, p):
  out, pos <span class="op">=</span> [], p[<span class="dv">0</span>] <span class="co"># FIRST OCCURRENCE</span>
  ff <span class="op">=</span> <span class="bu">eval</span>(f)
  pos_b, pos_a <span class="op">=</span> pos, pos
  punct <span class="op">=</span> [<span class="st">&#39;,&#39;</span>, <span class="st">&#39;.&#39;</span>, <span class="st">&#39;!&#39;</span>, <span class="st">&#39;?&#39;</span>, <span class="st">&#39;(&#39;</span>, <span class="st">&#39;)&#39;</span>, <span class="st">&#39;:&#39;</span>, <span class="st">&#39;;&#39;</span>, <span class="st">&#39;</span><span class="ch">\n</span><span class="st">&#39;</span>, <span class="st">&#39;-&#39;</span>, <span class="st">&#39;_&#39;</span>]
  <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">10</span>):
    <span class="cf">if</span> pos <span class="op">&gt;</span> i:
      <span class="cf">if</span> ff[pos <span class="op">-</span> i] <span class="kw">in</span> punct:
        pos_b <span class="op">=</span> pos <span class="op">-</span> (i <span class="op">-</span> <span class="dv">1</span>)
        <span class="cf">break</span>
      <span class="cf">else</span>:
        <span class="cf">if</span> ff[pos <span class="op">-</span> <span class="dv">5</span>]: pos_b <span class="op">=</span> pos <span class="op">-</span> <span class="dv">5</span>
        <span class="cf">else</span>:           pos_b <span class="op">=</span> pos
    <span class="cf">else</span>: pos_b <span class="op">=</span> pos
  <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">10</span>):
    <span class="cf">if</span> (pos <span class="op">+</span> j) <span class="op">&lt;</span> <span class="bu">len</span>(ff):
      <span class="cf">if</span> ff[pos <span class="op">+</span> j] <span class="kw">in</span> punct:
        pos_a <span class="op">=</span> pos <span class="op">+</span> j
        <span class="cf">break</span>
      <span class="cf">else</span>:
        <span class="cf">if</span> ff[pos <span class="op">+</span> j]: pos_a <span class="op">=</span> pos <span class="op">+</span> j
        <span class="cf">else</span>:           pos_a <span class="op">=</span> pos
    <span class="cf">else</span>: pos_a <span class="op">=</span> pos
  <span class="cf">if</span> pos_b <span class="op">&gt;=</span> <span class="dv">0</span> <span class="kw">and</span> pos_a <span class="op">&lt;=</span> <span class="bu">len</span>(ff):
    pre <span class="op">=</span> <span class="st">&#39; &#39;</span>.join(ff[pos_b:pos])
    post <span class="op">=</span> <span class="st">&#39; &#39;</span>.join(ff[pos<span class="op">+</span><span class="dv">1</span>:pos_a])
    out <span class="op">=</span> (pre, w, post)
  <span class="cf">return</span> out</code></pre>
<figcaption>Code 10.6 – ‘pp_sent’: retrieving one sentence—Python</figcaption>
</figure>
</div>
  
<p>In function <code>pp_sent</code> (source <a href="#code:10.6">10.6</a>) line 5 is important to note because it is a key functionality point. Even though the index files store a full list of all possible positions of a given word in each file, the <code>pp_sent</code> function only retrieves the sentence of the very first occurrence of the word rather than each one. This decision was taken to avoid overcrowding of results for the same keyword and is further discussed in chapter <a href="analysis.html#s:sents">12.2.2</a>.</p>
<p>Line 8 creates a list of punctuation marks needed to determine a suitable sentence fragment. Lines 9–17 and 18–26 set the <code>pos_b</code> (position before) and <code>pos_a</code> (position after) variables respectively. These positions can be up to 10 words before and after the keyword <code>w</code> depending on the sentence structure (punctuation marks). In line 28 the actual sentence fragment up to the keyword is retrieved, while in line 29 the fragment just after the keyword is retrieved. <code>ff[pos_b:pos]</code> for example returns the list of words from position <code>pos_b</code> to position <code>pos</code> from file <code>ff</code>. The built-in Python <code>.join()</code> function then concatenates these words into one long string separated by spaces. On line 30 a triple containing the pre-sentence, keyword and post-sentence is set as the output and then returned.</p>
</section>
  
<section id="s:syzygyalgo" class="level3">
<h3><span class="header-section-number">10.2.3</span> Syzygy</h3>
  <p>The concept of the syzygy was introduced in chapter <a href="pataphysics.html#s:syzygy">4.2.4</a> but can be roughly described as surprising and confusing. It originally comes from astronomy and denotes the alignment of three celestial bodies in a straight line. In a pataphysical context it is the pun. It usually describes a conjunction of things, something unexpected and surprising. Unlike serendipity, a simple chance encounter, the syzygy has a more scientific purpose. In simple terms, the syzygy algorithm works in two steps:</p>
<ol>
<li><p>get syzygy words based on synsets and hypo-, hyper-, holo- and meronyms from WordNet,</p></li>
<li><p>get sentences from corpus that match syzygy words.</p></li>
</ol>
<p>The syzygy function makes heavy use of WordNet <span class="citation" data-cites="Miller1995">(Miller <a href="#ref-Miller1995">1995</a>)</span> through the NLTK Python library <span class="citation" data-cites="NLTK2016">(“Natural Language Toolkit. NLTK 3.0 Documentation” n.d.)</span> to find suitable results (importing it using the following command <code>from nltk.corpus import wordnet as wn</code>). Specifically, as shown in source <a href="#code:10.7">10.7</a>, the algorithm fetches the set of synonyms (synsets) on line 5. It then loops through all individual items <code>wn</code> in the list of synonyms <code>wordsets</code> in line 7–20. It finds any hyponyms, hypernyms,holonyms, and meronyms for (each of which denotes some sort of relationship or membership with its parent synonym—see figure <a href="analysis.html#fig:12.3">12.3</a>) using the <code>get_nym</code> function (see lines 8, 11, 14, and 17). Line 21 makes use of the <code>get_results</code> function (see source <a href="#code:10.5">10.5</a>) in the same was as the clinamen function does.</p>

<div class="sourceCode">
<figure id="code:10.7">
<pre class="sourceCode python"><code class="sourceCode python scrollbar"><span class="co"># w = word</span>
<span class="co"># c = corpus</span>
<span class="kw">def</span> syzygy(w, c):
  words, hypos, hypers, holos, meros <span class="op">=</span> <span class="bu">set</span>(),<span class="bu">set</span>(),<span class="bu">set</span>(),<span class="bu">set</span>(),<span class="bu">set</span>()
  wordsets <span class="op">=</span> wn.synsets(w)
  hypo_len, hyper_len, holo_len, mero_len, syno_len <span class="op">=</span> <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>
  <span class="cf">for</span> ws <span class="kw">in</span> wordsets:
    hypos.update(get_nym(<span class="st">&#39;hypo&#39;</span>, ws))
    hypo_len <span class="op">+=</span> <span class="bu">len</span>(hypos)
    words.update(hypos)
    hypers.update(get_nym(<span class="st">&#39;hyper&#39;</span>, ws))
    hyper_len <span class="op">+=</span> <span class="bu">len</span>(hypers)
    words.update(hypers)
    holos.update(get_nym(<span class="st">&#39;holo&#39;</span>, ws))
    holo_len <span class="op">+=</span> <span class="bu">len</span>(holos)
    words.update(holos)
    meros.update(get_nym(<span class="st">&#39;mero&#39;</span>, ws))
    mero_len <span class="op">+=</span> <span class="bu">len</span>(meros)
    words.update(meros)
    syno_len <span class="op">+=</span> <span class="dv">1</span>
  out, sources, total <span class="op">=</span> get_results(words, <span class="st">&#39;Syzygy&#39;</span>, c)
  <span class="cf">return</span> out, words, sources, total</code></pre>
 <figcaption>Code 10.7 – ‘syzygy’: pataphysicalising a query term—Python</figcaption>
</figure>
  </div>
  
<p>The <code>get_nym</code> function in source <a href="#code:10.8">10.8</a> shows how the relevant ‘nyms’ are retrieved for a given synset. Line 5 initialises the variable <code>hhh</code> which gets overwritten later on. Several <code>if</code> statements separate out the code run for the different ‘nyms’. Lines 6–7 retrieves any hyponyms using NLTK’s <code>hyponyms()</code> function. Similarly lines 8–9 retrieve hypernyms, lines 10–14 retrieve holonyms, and lines 15–19 retrieve meronyms. Finally, line 20–23 adds the contents of <code>hhh</code> to the output of the function.</p>
  
<div class="sourceCode">
<figure id="code:10.8">
<pre class="sourceCode python"><code class="sourceCode python scrollbar"><span class="co"># nym = name of nym</span>
<span class="co"># wset = synset</span>
<span class="kw">def</span> get_nym(nym, wset):
  out <span class="op">=</span> []
  hhh <span class="op">=</span> wset.hyponyms()
  <span class="cf">if</span> nym <span class="op">==</span> <span class="st">&#39;hypo&#39;</span>:
    hhh <span class="op">=</span> wset.hyponyms()
  <span class="cf">if</span> nym <span class="op">==</span> <span class="st">&#39;hyper&#39;</span>:
    hhh <span class="op">=</span> wset.hypernyms()
  <span class="cf">if</span> nym <span class="op">==</span> <span class="st">&#39;holo&#39;</span>:
    hhhm <span class="op">=</span> wset.member_holonyms()
    hhhs <span class="op">=</span> wset.substance_holonyms()
    hhhp <span class="op">=</span> wset.part_holonyms()
    hhh <span class="op">=</span> hhhm <span class="op">+</span> hhhs <span class="op">+</span> hhhp
  <span class="cf">if</span> nym <span class="op">==</span> <span class="st">&#39;mero&#39;</span>:
    hhhm <span class="op">=</span> wset.member_meronyms()
    hhhs <span class="op">=</span> wset.substance_meronyms()
    hhhp <span class="op">=</span> wset.part_meronyms()
    hhh <span class="op">=</span> hhhm <span class="op">+</span> hhhs <span class="op">+</span> hhhp
  <span class="cf">if</span> <span class="bu">len</span>(hhh) <span class="op">&gt;</span> <span class="dv">0</span>:
    <span class="cf">for</span> h <span class="kw">in</span> hhh:
      <span class="cf">for</span> l <span class="kw">in</span> h.lemmas():
        out.append(<span class="bu">str</span>(l.name()))
  <span class="cf">return</span> out</code></pre>
<figcaption>Code 10.8 – ‘get_nym’: retrieving hypo/hyper/holo/meronyms—Python</figcaption>
</figure>
</div>
  
<p>The syzygy algorithm mimics an alignment of three words in a line (query <span class="math inline">→</span> synonym <span class="math inline">→</span> hypo/hyper/holo/meronym).</p>
</section>
  
<section id="s:antinomyalgo" class="level3">
<h3><span class="header-section-number">10.2.4</span> Antinomy</h3>
<p>The antimony, in a pataphysical sense, is the mutually incompatible. It was previously introduced in chapter <a href="pataphysics.html#s:antinomy">4.2.2</a>. In simple terms, the antinomy algorithm works in two steps:</p>
<ol>
<li><p>get antinomy words based on synsets and antonyms from WordNet,</p></li>
<li><p>get sentences from corpus that match antinomy words.</p></li>
</ol>
 
<div class="sourceCode">
<figure id="code:10.9">
<pre class="sourceCode python"><code class="sourceCode python scrollbar"><span class="co"># w = input query term</span>
<span class="co"># c = name of corpus</span>
<span class="kw">def</span> antinomy(w, c):
  words <span class="op">=</span> <span class="bu">set</span>()
  wordsets <span class="op">=</span> wn.synsets(w)
  <span class="cf">for</span> ws <span class="kw">in</span> wordsets:
    anti <span class="op">=</span> ws.lemmas()[<span class="dv">0</span>].antonyms()
    <span class="cf">if</span> <span class="bu">len</span>(anti) <span class="op">&gt;</span> <span class="dv">0</span>:
      <span class="cf">for</span> a <span class="kw">in</span> anti:
        <span class="cf">if</span> <span class="bu">str</span>(a.name()) <span class="op">!=</span> w:
          words.add(<span class="bu">str</span>(a.name()))
  out, sources, total <span class="op">=</span> get_results(words, <span class="st">&#39;Antinomy&#39;</span>, c)
  <span class="cf">return</span> out, words, sources, total</code></pre>
<figcaption>Code 10.9 – ‘antinomy’: pataphysicalising a query term—Python</figcaption>
</figure>
</div>

<p>For the antinomy I simply used WordNet’s antonyms (opposites) (source <a href="#code:10.9">10.9</a>). In principle, this function is similar to the algorithm for the syzygy. It finds all antonyms through NLTK’s <code>lemmas()[0].antonyms()</code> function on line 7 and retrieves result sentences using the <code>get_results</code> function on line 12.</p>
<p>The antinomy algorithm mimics the mutually incompatible or polar opposites.</p>
</section>
  
<section id="s:formalisation" class="level3">
<h3><span class="header-section-number">10.2.5</span> Formalisation</h3>
<p>A formal description of the <a href="http://pata.physics.wtf" class="uri">pata.physics.wtf</a> system in terms of an IR model described in chapter <a href="technology.html#s:irmodels">6.1.1</a> is unsuitable. It assumes for example the presence of some sort of ranking algorithm $R(q_i,d_j)$.</p>
<p>Making relevant changes (e.g. exchanging the ranking function for a pataphysicalisation function) to the specification by Baeza-Yates and Ribeiro-Neto <span class="citation" data-cites="Baeza-Yates2011">(<a href="#ref-Baeza-Yates2011">2011</a>)</span>, an approximate system description for the Faustroll corpus text search could be as follows.</p>

<table class="where">
  <tr>
    <th>$D$</th>
    <th>=</th>
    <th>the set of documents $\{d_1, ..., d_m\}$</th>
  </tr>
  <tr>
    <td>$m$</td>
    <td>=</td>
    <td>the number of all documents in $D$ ($|D| = 28$)</td>
  </tr>
  <tr>
    <td>$V$</td>
    <td>=</td>
    <td>the set of all distinct terms $\{v_1, ..., v_n\}$ in $D$ not including stopwords</td>
  </tr>
  <tr>
    <td>$q$</td>
    <td>=</td>
    <td>the user query</td>
  </tr>
  <tr>
    <td>$F$</td>
    <td>=</td>
    <td>the set of patalgorithms $\{f_C, f_S, f_A\}$</td>
  </tr>
  <tr>
    <td>$P$</td>
    <td>=</td>
    <td>the set of pataphysicalised query terms $\{p_1, ..., p_u\}$</td>
  </tr>
  <tr>
    <td>$u$</td>
    <td>=</td>
    <td>the number of terms in $P$</td>
  </tr>
  <tr>
    <td>$P(q)$</td>
    <td>=</td>
    <td>the set of patadata $\{P(q)_C \cup P(q)_S \cup P(q)_A\}$ for query $q$</td>
  </tr>
  <tr>
    <td>$R$</td>
    <td>=</td>
    <td>the set of results $\{r_1, ..., r_o\}$</td>
  </tr>
  <tr>
    <td>$o$</td>
    <td>=</td>
    <td>the number of results in $R$</td>
  </tr>
  <tr>
    <td>$R(P(q))$</td>
    <td>=</td>
    <td>the set of results $\{R(P(q)_C) \cup R(P(q)_S) \cup R(P(q)_A)\}$</td>
  </tr>
  <tr>
    <td>$r$</td>
    <td>=</td>
    <td>a result of form ($d$, sentence, $f$)</td>
  </tr>
</table>

<p>We can then define the three patalgorithms in a more formal way as shown in equations <a href="#eq:10.1">10.1</a>, <a href="#eq:10.2">10.2</a>, and <a href="#eq:10.3">10.3</a>.</p>

<figure id="eq:10.1" class="equation scrollbar">
<span class="math display">$$P(q)_C = \{p ∈ v_0 : 0 &lt; \text{dameraulevenshtein}(q, p) ≤ 2 \}$$
<figcaption>(10.1)</figcaption>
</figure>

<p><code>dameraulevenshtein(q,p)</code> in equation <a href="#eq:10.1">10.1</a> is the Damerau-Levenshtein algorithm as described in section <a href="#code:10.4">10.4</a> and $v_0$ is the Faustroll text.</p>

<figure id="eq:10.2" class="equation scrollbar">
<span class="math display">$$\begin{split}
    P(q)_S &amp;= \{p \in V: p \in \text{nyms}(s), \ \forall \ s \in \text{synonyms}(q)\}\\
    \text{where} \ \text{nyms}(s) &amp;= \text{hypos}(s) \ \cup \ \text{hypers}(s) \ \cup \ \text{holos}(s) \ \cup \ \text{meros}(s)
  \end{split}
  \label{eq:syzygy}$$
<figcaption>(10.2)</figcaption>
</figure>

<p><code>synonyms(q)</code> in equation <a href="#eq:10.2">10.2</a> is the WordNet/NLTK function to retrieve all synsets for the query $q$ and the four ‘nym’ functions return the relevant hyponyms, hypernyms, holonyms or meronyms for each of the synonyms.</p>

<figure id="eq:10.3" class="equation scrollbar">
<span class="math display">$$P(q)A = \{p ∈ V : p ∈ \text{antonyms}(s), ∀ \ s ∈ \text{synonyms}(q)\}$$
<figcaption>(10.3)</figcaption>
</figure>

<p>Similarly, in equation <a href="#eq:10.3">10.3</a> the <code>synonyms(q)</code> function returns WordNet synsets for the query $q$ and the <code>antonyms(q)</code> function returns WordNet antonyms for each of the synonyms.</p>

<figure id="eq:10.4" class="equation scrollbar">
<span class="math display">$$R(P(q)) = \{(d ∈ D,  \text{sent}(p) ∈ d,  f ∈ F) : ∀ \ p ∈ P(q)_f))\}$$
<figcaption>(10.4)</figcaption>
</figure>

<p>The set of results $R(P(q))$ can then be defined as shown in equation <a href="#eq:10.4">10.4</a>. It returns a list of triples containing the source text $d$, the sentence <code>sent(p)</code> and the algorithm $f$. For each pataphysicalised query term $p$ one sentence is retrieved per file $d$.</p>
</section>
</section>

<section id="s:imgvid" class="level2">
<h2><span class="header-section-number">10.3</span> Image &amp; Video</h2>
<p>The image and video search of <a href="http://pata.physics.wtf" class="uri">pata.physics.wtf</a> both work slightly differently to the text search described in section <a href="#s:algorithms">10.2</a>. In simple terms, the image and video search works in three steps:</p>
<ol>
<li><p>translate query,</p></li>
<li><p>pataphysicalise the translation,</p></li>
<li><p>retrieve matching images/videos using API calls.</p></li>
</ol>
<p>The first step is to translate the search terms as shown in source <a href="#code:10.10">10.10</a>. Lines 2 and 4 set up the API connection to the Microsoft Translator tool <span class="citation" data-cites="TranslatorAPI">(“Microsoft Translator - Text Translation. DataMarket” <a href="#ref-TranslatorAPI">2011</a>)</span> given an ID and ‘secret’, neither of which are included here for security reasons. The query <code>sent</code> then passes through a chain (alignment) of three translations in true syzygy fashion: from English <span class="math inline">→</span> French, from French <span class="math inline">→</span> Japanese, and from Japanese <span class="math inline">→</span> English (lines 5–7). All three languages are then returned in a triple (line 8).</p>

<div class="sourceCode">
<figure id="code:10.10">
<pre class="sourceCode python"><code class="sourceCode python scrollbar"><span class="co"># sent = the query string</span>
<span class="im">from</span> microsofttranslator <span class="im">import</span> Translator
<span class="kw">def</span> transent(sent):
  translator <span class="op">=</span> Translator(microsoft_id, microsoft_secret)
  french <span class="op">=</span> translator.translate(sent, <span class="st">&quot;fr&quot;</span>)
  japanese <span class="op">=</span> translator.translate(french, <span class="st">&quot;ja&quot;</span>)
  patawords <span class="op">=</span> translator.translate(japanese, <span class="st">&quot;en&quot;</span>)
  translations <span class="op">=</span> (french, japanese, patawords)
  <span class="cf">return</span> translations</code></pre>
<figcaption>Code 10.10 – ‘transent’: translating query between English-French-Japanese-English—Python</figcaption>
</figure>
</div>

<p>The next step is to pataphysicalise the translated query (see source <a href="#code:10.11">10.11</a>). The <code>pataphysicalise</code> function transforms this translation in a process slighlty simplified from the <code>syzygy</code> algorithm. The decision to simplify the algorithm was made due to performance issues related to the API calls that follow in the final step of the search process.</p>
<p>In line 5 WordNet synsets are retrieved using NLTK’s <code>synsets</code> function. For each of these synsets we get a list of synonyms (line 8) which we add to the output in a normalised form (line 11) removing any underscores if there are any.</p>

<div class="sourceCode">
<figure id="code:10.11">
<pre class="sourceCode python"><code class="sourceCode python scrollbar"><span class="co"># words = query term(s)</span>
<span class="kw">def</span> pataphysicalise(words):
  sys_ws <span class="op">=</span> <span class="bu">set</span>()
  <span class="cf">for</span> word <span class="kw">in</span> words:
    synonyms <span class="op">=</span> wn.synsets(word)
    <span class="cf">if</span> <span class="bu">len</span>(synonyms) <span class="op">&gt;</span> <span class="dv">0</span>:
      <span class="cf">for</span> s <span class="kw">in</span> synonyms:
        <span class="cf">for</span> l <span class="kw">in</span> s.lemmas():
          x <span class="op">=</span> <span class="bu">str</span>(l.name())
          o <span class="op">=</span> x.replace(<span class="st">&#39;_&#39;</span>, <span class="st">&#39; &#39;</span>)
          sys_ws.add(o)
  <span class="cf">return</span> sys_ws</code></pre>
<figcaption>Code 10.11 – ‘pataphysicalise’: pataphysicalise image and video query terms—Python</figcaption>
</figure>
</div>

<p>Figure <a href="#fig:10.5">10.5</a> previously showed the rough sequence of events in an image and video search and highlighted that the pataphysicalisation from query to patadata happens in the <code>imagesurfer.py</code> Python script file while the production of results from that patadata happens in the <code>fania.js</code> JavaScript file.</p>
<p>And finally, API calls to the various external tools are made. This is described in section <a href="#s:api">10.3.1</a> below.</p>

<section id="s:api" class="level3">
<h3><span class="header-section-number">10.3.1</span> REST &amp; API</h3>
<p>The final step of the image and video search process is to retrieve matching images/videos using API calls to Flickr <span class="citation" data-cites="FlickrAPI FlickrGuideAPI">(“flickr.photo.search. the App Garden” n.d.; “Getting Started. the Flickr Developer Guide: API” n.d.)</span>, Getty <span class="citation" data-cites="GettyAPI GettyOverviewAPI">(“Search for Creative Images. Getty Images Api” n.d.; “API Overview. Getty Images Api” n.d.)</span>, Bing <span class="citation" data-cites="BingAPI BingAzureAPI">(“Image Search API Reference. Microsoft Developer Network (Msdn)” n.d.; “Bing Search API. DataMarket” <a href="#ref-BingAzureAPI">2012</a>)</span>, YouTube <span class="citation" data-cites="YouTubeAPI">(“Search: list. YouTube Data Api” n.d.)</span> and Microsoft Translator <span class="citation" data-cites="TranslatorAPI">(“Microsoft Translator - Text Translation. DataMarket” <a href="#ref-TranslatorAPI">2011</a>)</span>.</p>
<p>The patadata used to make the API calls is limited to 10 keywords and uses the function <code>random.sample(pata, 10)</code>, where <code>pata</code> is the set of terms obtained by pataphysicalising the query translation.</p>
<p>A RESTful API allows browsers (‘clients’) to communicate with a web server via HTTP methods such as GET and POST. The idea is that a given service, like the Microsoft Bing search API, can be accessed in a few simple steps using JavaScript Object Notation (JSON) <span class="citation" data-cites="JSON2016">(“Introducing Json. ECMA-404 the Json Data Interchange Standard” n.d.)</span>. These are:</p>
<ol>
<li><p>for each of the 10 query terms do:</p>
<ol>
<li><p>construct the URL with the query request</p></li>
<li><p>setup authentication</p></li>
<li><p>send URL and authentication</p></li>
<li><p>receive response in JSON</p></li>
<li><p>add result to output list <code>imglist</code></p></li>
</ol></li>
<li><p>once 10 results are reached, render results as spiral</p></li>
</ol>
<p>Source <a href="#code:10.12">10.12</a> shows how such an API call is made using JavaScript (in this case Flickr). Source <a href="#code:10.13">10.13</a> below shows how 10 seperate images are collected into one results list and the <code>createSpiral</code> function is called to render the images to the user in HTML (see appendix [s:imgspiral] for the relevant code snippet).</p>

<div class="sourceCode">
<figure id="code:10.12">
<pre class="sourceCode javascript"><code class="sourceCode javascript scrollbar"><span class="kw">function</span> <span class="at">flickrsearch</span>(patadata)<span class="op">{</span>
  <span class="cf">for</span>(<span class="kw">var</span> x<span class="op">=</span><span class="dv">0</span><span class="op">;</span> x<span class="op">&lt;</span><span class="dv">10</span><span class="op">;</span> x<span class="op">++</span>)<span class="op">{</span>
    <span class="va">$</span>.<span class="at">getJSON</span>(<span class="st">&quot;http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?&quot;</span><span class="op">,</span>
      <span class="op">{</span>
        <span class="dt">tags</span><span class="op">:</span> patadata[x].<span class="at">query</span><span class="op">,</span>
        <span class="dt">tagmode</span><span class="op">:</span> <span class="st">&quot;all&quot;</span><span class="op">,</span>
        <span class="dt">format</span><span class="op">:</span> <span class="st">&quot;json&quot;</span>
      <span class="op">},</span>
      <span class="kw">function</span>(data<span class="op">,</span>status<span class="op">,</span>ajax) <span class="op">{</span>
        <span class="kw">var</span> title <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">,</span> media <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">,</span> link <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span>
        <span class="cf">if</span> (<span class="va">data</span>.<span class="at">items</span>[<span class="dv">0</span>] <span class="op">!=</span> <span class="kw">undefined</span>) <span class="op">{</span>
          title <span class="op">=</span> <span class="va">data</span>.<span class="at">items</span>[<span class="dv">0</span>].<span class="at">title</span><span class="op">;</span>
          media <span class="op">=</span> <span class="va">data</span>.<span class="at">items</span>[<span class="dv">0</span>].<span class="va">media</span>.<span class="at">m</span><span class="op">;</span>
          link <span class="op">=</span> <span class="va">data</span>.<span class="at">items</span>[<span class="dv">0</span>].<span class="at">link</span><span class="op">;</span>
        <span class="op">}</span>
        <span class="at">imgList</span>([title<span class="op">,</span> media<span class="op">,</span> link])<span class="op">;</span>
      <span class="op">}</span>
    )<span class="op">;</span>
  <span class="op">}</span>
<span class="op">};</span></code></pre>
<figcaption>Code 10.12 – ‘flickrsearch’: using the Flickr API to retrieve images—JavaScript</figcaption>
</figure>
</div>

<div class="sourceCode">
<figure id="code:10.13">
<pre class="sourceCode javascript"><code class="sourceCode javascript scrollbar"><span class="kw">var</span> allImages <span class="op">=</span> []<span class="op">;</span>
<span class="kw">function</span> <span class="at">imgList</span>(img)<span class="op">{</span>
  <span class="cf">if</span> (allImages[<span class="dv">0</span>] <span class="op">!=</span> <span class="st">&quot;&quot;</span>) <span class="op">{</span>
    <span class="va">allImages</span>.<span class="at">push</span>(img)<span class="op">;</span>
  <span class="op">}</span>
  <span class="cf">if</span> (<span class="va">allImages</span>.<span class="at">length</span> <span class="op">===</span> <span class="dv">10</span>) <span class="op">{</span>
    <span class="at">createSpiral</span>(allImages)<span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre>
<figcaption>Code 10.13 – ‘imgList’: accumulates 10 images and calls the ‘createSpiral’ function—JavaScript</figcaption>
</figure>
</div>

<p>The Bing and Getty searches work in a similar way with one exception. Getty does not populate the output list by doing 10 individual API calls but rather by adding 10 results from 1 call. This is due to a time restriction in the Getty API; it doesn not allow 10 calls in a second.</p>

<img class="triplespiral" src="../images/triplespiral.png">

<p>An example URL request for the Flickr image search with the query term of ‘kittens’ and a requested response format of JSON is this: <a href="http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?tags=kittens&amp;tagmode=all&amp;format=json" class="uri">http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?tags=kittens&amp;tagmode=all&amp;format=json</a>. Flickr will then send back the response in JSON format. One entry of the list of results is shown below (with whitespace formatting added for convenience). The algorithm in source <a href="#code:10.12">10.12</a> only retrieves the <code>data.items[0].title</code>, <code>data.items[0].media.m</code> and <code>data.items[0].link</code> (lines 12, 13, and 14) and ignores all other data fields.</p>

<pre class="text"><code>({...
  &quot;items&quot;: 
    [{
      &quot;title&quot;: &quot;P_20161101_191123&quot;,
      &quot;link&quot;: &quot;http://www.flickr.com/photos/pinknancy/30078720153/&quot;,
      &quot;media&quot;: {&quot;m&quot;:&quot;http://farm6.staticflickr.com/5759/30078720153_f03e036e89_m.jpg&quot;},
      &quot;date_taken&quot;: &quot;2016-11-01T19:11:23-08:00&quot;,
      &quot;description&quot;: ...,
      &quot;published&quot;: &quot;2016-11-01T15:28:10Z&quot;,
      &quot;author&quot;: &quot;nobody@flickr.com (pinknancy)&quot;,
      &quot;author_id&quot;: &quot;8748781@N08&quot;,
      &quot;tags&quot;: &quot;&quot;
    },...]
})</code></pre>

<p>Once the <code>imglist</code> contains 10 items it is passed to the <code>createSpiral</code> function which renders it to HTML. Appendix [s:bingjson] shows an example shortnened JSON result from Bing.</p>

<img class="triplespiral" src="../images/triplespiral.png">

<p>The video search also uses an API to retrieve results. This function is written in Python and uses the <em>Requests</em> library <span class="citation" data-cites="Reitznd">(Reitz n.d.)</span> to make the API calls to YouTube <span class="citation" data-cites="YouTubeAPI">(“Search: list. YouTube Data Api” n.d.)</span> as shown in source <a href="#code:10.14">10.14</a>.</p>
<p>First, the query is translated using the <code>transent</code> function on line 3. Line 4 seperates the English translation into its own list <code>transplit</code> which is then pataphysicalised on line 5 using the algorithm described in source <a href="#code:10.11">10.11</a>.</p>
<p>Lines 6–9 construct the first part of the URL to use for the Representational State Transfer (REST) request. Lines 10–23 then loop through each of the patadata terms generated by the <code>pataphysicalise</code> function on line 5 to make a call and retrieve some video details (title, thumbnail and ID) as seen on lines 17–19. On line 20 these details are added to the output list.</p>

<div class="sourceCode">
<figure id="code:10.14">
<pre class="sourceCode python"><code class="sourceCode python scrollbar"><span class="kw">def</span> getvideos(query):
  out <span class="op">=</span> []
  translations <span class="op">=</span> transent(query)
  transplit <span class="op">=</span> translations[<span class="dv">2</span>].split(<span class="st">&#39; &#39;</span>)
  tmp <span class="op">=</span> pataphysicalise(transplit)
  b0 <span class="op">=</span> <span class="st">&quot;https://www.googleapis.com/youtube/v3/search?&quot;</span>
  b1 <span class="op">=</span> <span class="st">&quot;&amp;order=viewCount&amp;part=snippet&amp;&quot;</span>
  b3 <span class="op">=</span> <span class="st">&quot;&amp;type=video&amp;key=</span><span class="sc">%s</span><span class="st">&quot;</span> <span class="op">%</span> yt_key
  b4 <span class="op">=</span> <span class="st">&quot;&amp;maxResults=10&amp;safeSearch=strict&quot;</span>
  <span class="cf">for</span> x <span class="kw">in</span> tmp:
    y <span class="op">=</span> <span class="st">&#39; &#39;</span>.join(x)
    b2 <span class="op">=</span> <span class="st">&quot;q=</span><span class="sc">%s</span><span class="st">&quot;</span> <span class="op">%</span> translations[<span class="dv">2</span>]
    yturl <span class="op">=</span> <span class="st">&#39;&#39;</span>.join([b0, b1, b2, b3, b4])
    vids <span class="op">=</span> requests.get(yturl)
    <span class="cf">if</span> vids.json()[<span class="st">&#39;items&#39;</span>]:
      <span class="cf">for</span> i <span class="kw">in</span> vids.json()[<span class="st">&#39;items&#39;</span>]:
        vidtitle <span class="op">=</span> i[<span class="st">&#39;snippet&#39;</span>][<span class="st">&#39;title&#39;</span>]
        vidthumb <span class="op">=</span> i[<span class="st">&#39;snippet&#39;</span>][<span class="st">&#39;thumbnails&#39;</span>][<span class="st">&#39;default&#39;</span>][<span class="st">&#39;url&#39;</span>]
        vidid <span class="op">=</span> i[<span class="st">&#39;id&#39;</span>][<span class="st">&#39;videoId&#39;</span>]
        out.append((vidtitle, vidthumb, vidid))
      <span class="cf">break</span>
    <span class="cf">else</span>:
      out <span class="op">=</span> []
  <span class="cf">return</span> out, translations</code></pre>
<figcaption>Code 10.14 – ‘getvideos’: using the YouTube API to retrieve images—Python</figcaption>
</figure>
</div>

<p>The video results are then also displayed in a golden spiral in the same way as the images. This is described in section <a href="#s:spiral">10.4.3</a>.</p>
</section>
</section>

<section id="design" class="level2">
<h2><span class="header-section-number">10.4</span> Design</h2>
<p>Once the patalgorithms have produced their respective results, the page displaying these results can be rendered. This is done using the templating language Jinja <span class="citation" data-cites="Jinja2016">(Ronacher <a href="#ref-Jinja2016">2008</a>)</span> and HTML (with CSS stylesheets and some JavaScript).</p>
<p>One of the key requirements for the <em>Syzygy Surfer</em> tool was that “the user should be able to choose the techniques they use” <span class="citation" data-cites="Hendler2011">(Hendler and Hugill <a href="#ref-Hendler2011">2011</a>)</span>. This has been adopted for <a href="http://pata.physics.wtf" class="uri">pata.physics.wtf</a> in the sense that the user has different options for the display of results.</p>

<figure id="fig:10.6">
<img src="../images/proto3screen.png" alt="Responsive design of pata.physics.wtf" />
<figcaption>Figure 10.6 - Responsive design of <a href="http://pata.physics.wtf" class="uri">pata.physics.wtf</a></figcaption>
</figure>

<p>The text results page has three different result styles, with ‘Poetry — Queneau’ being the default.</p>
<dl>
<dt>Poetry</dt>
<dd><p>Displayed in sonnet style (two quatrains and two tercets) if possible, although no rhyming pattern is used<a href="#fn5" class="footnoteRef" id="fnref5"><sup>5</sup></a>.</p>
<ul>
<li><p>Queneau — Each line can be changed manually.</p></li>
<li><p>Random — The whole poem can be randomised.</p></li>
</ul>
</dd>
<dt>Sources</dt>
<dd><p>Ordered by source text.</p>
</dd>
<dt>Algorithms</dt>
<dd><p>Ordered by algorithm.</p>
</dd>
</dl>
<p>The image and video results pages work the same way. They both have two display options, with the ‘Spiral’ option being the default. The spirals are modelled on the idea of golden spirals (more precisely an approximation in the form of a Fibonacci spiral).</p>
<dl>
<dt>Spiral</dt>
<dd><p>Displayed as square images/videos in a spiral.</p>
</dd>
<dt>List</dt>
<dd><p>Displayed as a simple list.</p>
</dd>
</dl>
<p>The overal visual design is shown in image <a href="fig:10.6">10.6</a>.</p>

<section id="s:poetry" class="level3">
<h3><span class="header-section-number">10.4.1</span> Poetry</h3>
<p>Source <a href="code:10.15">10.15</a> shows the segment of HTML/Jinja code that renders the Queneau poetry. The code renders the 4 stanzas of the poem. This is done using two nested Jinja <code>for</code> loops (line 2 and line 10). Line 2 loops through the (ideally) 14 lines of the poem. <code>lol</code> can be considered a masterlist of all sublists for each poem line.</p>
<p>Functionality for sending the currently showing poem per email is added via a button which calls a JavaScript function <code>onclick="return getContent(this)"</code> which then retrieves the content of each line in the poem and sends it to the body of the email.</p>
<p><code>all_sens</code> is the pool of all sentences. It is structured as follows.</p>

<pre class="text"><code>[(title, (pre, word, post), algorithm), ...]</code></pre>

<p><code>lol</code> is a list subdivided into partitions for each line of the sonnet. Let’s say there are 350 sentences overall in <code>all_sens</code>. To divide them equally among the 14 lines of a sonnet, we need to create <code>lol</code> with 14 equal parts of 25 sentences.</p>

<pre class="text"><code>[all_sens[0-24], all_sens[25-49], ...,  all_sens[325-349]]</code></pre>

<div class="sourceCode">
<figure id="code:10.15">
<pre class="sourceCode html+jinja"><code class="sourceCode html+jinja scrollbar">&lt;div&gt;
  {% for n in range(1, lol|length + 1) %}
    {% set wid = [&quot;wn&quot;, n|string]|join %}
    {% set lid = [&quot;lyr&quot;, n|string]|join %}
    {% set sid = [&quot;scrollLinks&quot;, n|string]|join %}
    {% set aid = lol[n-1] %}
    &lt;div id=&quot;poems&quot;&gt;
      &lt;div id=&quot;{{wid}}&quot; class=&quot;wn&quot;&gt;
        &lt;div id=&quot;{{lid}}&quot; class=&quot;lyr&quot;&gt;
          {% for sens in aid %}&lt;span title=&quot;{{ sens[0] }}, {{ sens[2] }}&quot;&gt;{{ sens[1][0] }} &lt;form class=&quot;inform&quot; action=&quot;../textresults&quot; method=&quot;post&quot;&gt;&lt;input class=&quot;inlink&quot; type=&quot;submit&quot; name=&quot;query&quot; value=&quot;{{ sens[1][1] }}&quot; onclick=&quot;loading();&quot;&gt;&lt;/input&gt;&lt;/form&gt; {{ sens[1][2] }}&lt;/span&gt;{% endfor %}
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div id=&quot;{{sid}}&quot; class=&quot;scrollLinks&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
  {% endfor %}
&lt;/div&gt;</code></pre>
<figcaption>Code 10.15 – Simplified HTML code for rendering Queneau style poems</figcaption>
</figure>
</div>

<p>Changing a line of the poem is achieved by clicking on one of the buttons on either side of the poem’s line (as shown in image <a href="fig:10.7">10.7</a>). This will trigger a JavaScript function (based on <span class="citation" data-cites="DYNWEB2016">(“Horizontal Scrolling with Javascript” n.d.)</span>) to automatically scroll to the next sentence.</p>

<figure id="fig:10.7">
<img src="../images/qpoemtree.png" alt="Example Queneau poem for query tree" /><figcaption>Figure 10.7 - Example Queneau poem for query ‘tree’<span data-label="img:qpoemtree"></span></figcaption>
</figure>

<p>Non-Queneau poems have a slightly different functionality. It is not possible to change the poem line by line but rather the whole poem can be randomised on demand. This relies on a random number generator in JavaScript. A function <code>shufflePoem()</code> creates a random variable <code>r</code> as <code>Math.floor(Math.random() * n)</code>, which can then be used to generate a new list of 14 lines for the poem randomly selected from the pool of sentences <code>all_sens</code>.</p>
</section>

<section id="lists" class="level3">
<h3><span class="header-section-number">10.4.2</span> Lists</h3>
<p>The two other ways to display text results are as a list ordered by source or by patalgorithm which works in a similar way to what is described in source <a href="code:10.16">10.16</a>. The code is wrapped in an HTML unordered list tag <code>&lt;ul&gt;</code>. A Jinja <code>for</code> loop generates the individual <code>&lt;li&gt;</code> tags on line 4.</p>
<p>A <code>sens</code> in <code>all_sens</code> is structured as <code>(title, (pre, word, post), algorithm)</code>. This means that to access the name of the algorithm we need to call the Jinja template <code>{{ sens[2] }}</code>, to get the first half of the sentence we need <code>{{ sens[1][0] }}</code>, the middle keyword (i.e. the patadata term) <code>{{ sens[1][1] }}</code> and the second half of the sentence <code>{{ sens[1][2] }}</code>.</p>

<div class="sourceCode">
<figure id="code:10.16">
<pre class="sourceCode html+jinja"><code class="sourceCode html+jinja scrollbar">&lt;ul&gt;
  {% for sens in all_sens %}
    {% if file == sens[0] %}
      &lt;li title=`{{ sens[2] }}&#39;&gt;...{{ sens[1][0] }} &lt;form class=`inform&#39; action=`../textresults&#39; method=`post&#39;&gt;&lt;input class=`w3-hide&#39; type=`radio&#39; name=`corpus&#39; value=`{{ corpus }}&#39; checked&gt;&lt;input class=`inlink&#39; type=`submit&#39; name=`query&#39; value=`{{ sens[1][1] }}&#39; onclick=`loading();&#39;&gt;&lt;/input&gt;&lt;/form&gt; {{ sens[1][2] }}...&lt;/li&gt;
    {% endif %}
  {% endfor %}
&lt;/ul&gt;</code></pre>
<figcaption>Code 10.16 – Simplified HTML code for rendering a list of text results by source</figcaption>
</figure>
</div>

<p>Image <a href="fig:10.8">10.8</a>. shows a shortened example set of results for query ‘tree’ ordered by source, that is, ordered by original file.</p>

<figure id="fig:10.8">
<img src="../images/listsourcetree.png" alt="Example results for query tree ordered by source" />
<figcaption>Figure 10.8 - Example results for query ‘tree’ ordered by source<span data-label="img:listsourcetree"></span></figcaption>
</figure>

<p>Image <a href="fig:10.9">10.9</a> shows a shortened example set of results for query ‘tree’ ordered by patalgorithm, that is, ordered by the algorithm which produced the patadata.</p>

<figure id="fig:10.9">
<img src="../images/listalgotree.png" alt="Example results for query tree ordered by patalgorithm" />
<figcaption>Figure 10.9 - Example results for query ‘tree’ ordered by patalgorithm<span data-label="img:listalgotree"></span></figcaption>
</figure>
</section>

<section id="s:spiral" class="level3">
<h3><span class="header-section-number">10.4.3</span> Spiral</h3>
<p>The image and video spirals are constructed in complicated nested HTML components. The code for generating an image spiral is shown in appendix [s:imgspiral]. The video spiral is constructed in a similar way but directly in the HTML file as opposed to in the JavaScript file. The video spiral is almost identical, the only difference is the biggest 5 videos are atually embedded as videos. The smaller 5 videos are shown as still images which link to the relevant YouTube page.</p>
<p>Generally, the idea was taken from the pataphysical <em>grand gidouille</em> (see chapter <a href="pataphysics.html#ch:pataphysics">4</a>) and represented as a Fibonacci spiral. Figure <a href="fig:10.10">10.10</a> shows a spiral created using the Flickr image search for query ‘blue mountains’ overlaid with a white Fibonacci spiral to highlight the structure.</p>

<figure id="fig:10.10">
<img src="../images/fig1010.png" alt="Example results for query tree ordered by patalgorithm" />
<figcaption>Figure 10.10 - Fibonacci spiral overlaid onto an image results for query ‘blue mountains’ using Flickr</figcaption>
</figure>
</section>
</section>

<section id="s:prototypes" class="level2">
<h2><span class="header-section-number">10.5</span> Prototypes</h2>
<p>The final website <a href="http://pata.physics.wtf" class="uri">pata.physics.wtf</a> went through several iterations of development since it was first conceived in 2012. This included 3 major technical updates since the first prototype and 2 new visual re-designs. Table <a href="#tab:10.1">10.1</a> shows the main differences and similarities between the versions.</p>

<figure id="tab:10.1">
<div class="scrollbar">
<table>
  <tr>
    <th class="trans"></th>
    <th>Version 1</th>
    <th>Version 2</th>
    <th>Version 3</th>
    <th>Version 4</th>
  </tr>
  <tr>
    <th>Language(s)</th>
    <td>Python, Django</td>
    <td>Python, Flask</td>
    <td>Python, Flask</td>
    <td>Python, Flask, JavaScript</td>
  </tr>
  <tr>
    <th>Server</th>
    <td>Django, Heroku</td>
    <td>Flask, Mnemosyne</td>
    <td>Flask, Gunicorn, Mnemosyne</td>
    <td>Flask, Gunicorn, OVH</td>
  </tr>
  <tr>
    <th>Features</th>
    <td>Text</td>
    <td>Text, Image, Video</td>
    <td>Text, Image, Video</td>
    <td>Text, Image, Video</td>
  </tr>
  <tr>
    <th>Corpus</th>
    <td>Faustroll text</td>
    <td>Faustroll text</td>
    <td>Faustroll's library</td>
    <td>Faustroll's library and Shakespeare</td>
  </tr>
  <tr>
    <th>APIs</th>
    <td>WordNet</td>
    <td>WordNet, Flickr, Bing, YouTube, Microsoft Translator</td>
    <td>WordNet, Bing, YouTube, Microsoft Translator</td>
    <td>WordNet, Flickr, Getty, Bing, YouTube, Microsoft Translator</td>
  </tr>
  <tr>
    <th>Design</th>
    <td>Algorithms</td>
    <td>Algorithms, Spirals</td>
    <td>Algorithms, Source, Spirals, Poetry, Spiral, List</td>
    <td>Algorithms, Source, Spirals, Poetry, Spiral, List</td>
  </tr>
  <tr>
    <th>Responsive</th>
    <td>No</td>
    <td>Yes</td>
    <td>Yes</td>
    <td>Yes</td>
  </tr>
</table>
</div>
<figcaption>Table 10.1 - Comparison of different versions of pata.physics.wtf</figcaption>
</figure>

<p>Images <a href="#fig:10.11">10.11</a>, <a href="#fig:10.12">10.12</a> and <a href="#fig:10.13">10.13</a> show the 3 main visual designs.</p>

<figure id="fig:10.11" class="half">
<img src="../images/proto1screen.png" alt="First version of pata.physics.wtf" />
<figcaption>Figure 10.11 - First version of <a href="http://pata.physics.wtf" class="uri">pata.physics.wtf</a></figcaption>
</figure>
<figure id="fig:10.12" class="half">
<img src="../images/proto2screen.png" alt="Second major version of pata.physics.wtf" />
<figcaption>Figure 10.12 - Second major version of <a href="http://pata.physics.wtf" class="uri">pata.physics.wtf</a></figcaption>
</figure>

<p>The latest version, which is now live at <a href="http://pata.physics.wtf" class="uri">pata.physics.wtf</a>, introduced major changes to the initial setup stage of the system and a lot of the code was refactored and improved. As of the date of writing this, there were over 360 commits in the git repository since 2012. See appendix [s:gitweb].</p>
</section>
</section>

<section id="bibliography" class="level1 unnumbered">
<h1>References</h1>
<div id="refs" class="references">
<div id="ref-GettyOverviewAPI">
<p>“API Overview. Getty Images Api.” n.d. Getty. <a href="http://developers.gettyimages.com/api/docs/v3/api-overview.html" class="uri">http://developers.gettyimages.com/api/docs/v3/api-overview.html</a>.</p>
</div>
<div id="ref-Baeza-Yates2011">
<p>Baeza-Yates, Ricardo, and Berthier Ribeiro-Neto. 2011. <em>Modern Information Retrieval: The Concepts and Technology Behind Search</em>. Harlow, UK: Pearson Education Limited. <a href="http://www.mir2ed.org/" class="uri">http://www.mir2ed.org/</a>.</p>
</div>
<div id="ref-Bergerac2014">
<p>Bergerac, Cyrano de. 2014. <em>A Voyage to the Moon</em>. Edited by Marc D’Hooghe. Translated by Archibald Lovell. Project Gutenberg. <a href="http://www.gutenberg.org/files/46547/46547-h/46547-h.htm" class="uri">http://www.gutenberg.org/files/46547/46547-h/46547-h.htm</a>.</p>
</div>
<div id="ref-BingAzureAPI">
<p>“Bing Search API. DataMarket.” 2012. Microsoft. <a href="http://datamarket.azure.com/dataset/bing/search#schema" class="uri">http://datamarket.azure.com/dataset/bing/search#schema</a>.</p>
</div>
<div id="ref-Bloy2011">
<p>Bloy, Léon. 2011. <em>Le désespéré</em>. Project Gutenberg. <a href="http://www.gutenberg.org/cache/epub/35568/pg35568-images.html" class="uri">http://www.gutenberg.org/cache/epub/35568/pg35568-images.html</a>.</p>
</div>
<div id="ref-Bok2002">
<p>Bök, Christian. 2002. <em>’Pataphysics: The Poetics of an Imaginary Science</em>. Evanston, Illinois, USA: Northwestern University Press.</p>
</div>
<div id="ref-Coleridge2013">
<p>Coleridge, Samuel Taylor. 2013. <em>The Rime of the Ancient Mariner</em>. Project Gutenberg. <a href="http://www.gutenberg.org/files/151/151-h/151-h.htm" class="uri">http://www.gutenberg.org/files/151/151-h/151-h.htm</a>.</p>
</div>
<div id="ref-Damerau1964">
<p>Damerau, Fred. 1964. “A Technique for Computer Detection and Correction of Spelling Errors.” <em>Communications of the ACM</em> 7 (3): 171–76.</p>
</div>
<div id="ref-Darien2005">
<p>Darien, George. 2005. <em>Le Voleur</em>. Project Gutenberg. <a href="http://www.gutenberg.org/cache/epub/15297/pg15297-images.html" class="uri">http://www.gutenberg.org/cache/epub/15297/pg15297-images.html</a>.</p>
</div>
<div id="ref-Copyright2012">
<p>“Derivative Works. Factsheet No. P-22.” 2012. UK Copyright Service. <a href="http://www.copyrightservice.co.uk/copyright/p22\_derivative\_works" class="uri">http://www.copyrightservice.co.uk/copyright/p22\_derivative\_works</a>.</p>
</div>
<div id="ref-Desbordes2004">
<p>Desbordes-Valmore, Marceline. 2004. <em>Le Livre Des Mères et Des Enfants</em>. Project Gutenberg. <a href="http://www.gutenberg.org/files/14258/14258-h/14258-h.htm" class="uri">http://www.gutenberg.org/files/14258/14258-h/14258-h.htm</a>.</p>
</div>
<div id="ref-Elskamp1898">
<p>Elskamp, Max. 1898. <em>Enluminures</em>. Edited by Paul Lacomblez. Wikisource. <a href="https://fr.wikisource.org/wiki/Enluminures_(Elskamp)" class="uri">https://fr.wikisource.org/wiki/Enluminures_(Elskamp)</a>.</p>
</div>
<div id="ref-FlickrAPI">
<p>“flickr.photo.search. the App Garden.” n.d. Flickr. <a href="https://www.flickr.com/services/api/flickr.photos.search.html" class="uri">https://www.flickr.com/services/api/flickr.photos.search.html</a>.</p>
</div>
<div id="ref-Florian2012">
<p>Florian, Jean Pierre Claris de. 2012. <em>Les Deux Billets</em>. Edited by Paul Fiervre. Théâtre Classique. <a href="http://www.theatre-classique.fr/pages/txt/FLORIAN_DEUXBILLETS.txt" class="uri">http://www.theatre-classique.fr/pages/txt/FLORIAN_DEUXBILLETS.txt</a>.</p>
</div>
<div id="ref-Gutenberg2016">
<p>“Free Ebooks.” 2016. Project Gutenberg. <a href="https://www.gutenberg.org/" class="uri">https://www.gutenberg.org/</a>.</p>
</div>
<div id="ref-FlickrGuideAPI">
<p>“Getting Started. the Flickr Developer Guide: API.” n.d. Flickr. <a href="https://www.flickr.com/services/developer/api/" class="uri">https://www.flickr.com/services/developer/api/</a>.</p>
</div>
<div id="ref-Git2016">
<p>“Git - Fast, Scalable, Distributed Revision Control System. Git/Readme.md.” 2016. GitHub. <a href="https://github.com/git/git/blob/master/README.md" class="uri">https://github.com/git/git/blob/master/README.md</a>.</p>
</div>
<div id="ref-Grabbe1995">
<p>Grabbe, Christian Dietrich. 1995. <em>Scherz, Satire, Ironie Und Tiefere Bedeutung</em>. Gutenberg DE Spiegel. <a href="http://gutenberg.spiegel.de/buch/scherz-satire-ironie-und-tiefere-bedeutung-3514/1" class="uri">http://gutenberg.spiegel.de/buch/scherz-satire-ironie-und-tiefere-bedeutung-3514/1</a>.</p>
</div>
<div id="ref-Gunicorn2016">
<p>“Gunicorn: Python Wsgi Http Server for Unix.” n.d. <a href="http://gunicorn.org/" class="uri">http://gunicorn.org/</a>.</p>
</div>
<div id="ref-Hendler2011">
<p>Hendler, Jim, and Andrew Hugill. 2011. “The Syzygy Surfer: Creative Technology for the World Wide Web.” In <em>Proceedings of the 3rd International Conference on Web Science</em>. Koblenz, Germany.</p>
</div>
<div id="ref-Homer1999">
<p>Homer. 1999. <em>The Odyssey</em>. Translated by Samuel Butler. Project Gutenberg. <a href="http://www.gutenberg.org/files/1727/1727-h/1727-h.htm" class="uri">http://www.gutenberg.org/files/1727/1727-h/1727-h.htm</a>.</p>
</div>
<div id="ref-DYNWEB2016">
<p>“Horizontal Scrolling with Javascript.” n.d. Dynamic Web Coding. <a href="http://www.dyn-web.com/code/scroll/horiz.php" class="uri">http://www.dyn-web.com/code/scroll/horiz.php</a>.</p>
</div>
<div id="ref-BingAPI">
<p>“Image Search API Reference. Microsoft Developer Network (Msdn).” n.d. Microsoft. <a href="https://msdn.microsoft.com/en-us/library/dn760791.aspx" class="uri">https://msdn.microsoft.com/en-us/library/dn760791.aspx</a>.</p>
</div>
<div id="ref-JSON2016">
<p>“Introducing Json. ECMA-404 the Json Data Interchange Standard.” n.d. json.org. <a href="http://www.json.org/" class="uri">http://www.json.org/</a>.</p>
</div>
<div id="ref-Jarry1996">
<p>Jarry, Alfred. 1996. <em>Exploits and Opinions of Dr. Faustroll, Pataphysician</em>. Cambridge, MA, USA: Exact Change.</p>
</div>
<div id="ref-Jarry2005">
<p>———. 2005. <em>Ubu Roi Ou Les Polonais</em>. Project Gutenberg. <a href="http://www.gutenberg.org/files/16884/16884-h/16884-h.htm" class="uri">http://www.gutenberg.org/files/16884/16884-h/16884-h.htm</a>.</p>
</div>
<div id="ref-Kahn2016">
<p>Kahn, Gustave. n.d. <em>Le Contre de L’or Er Du Silence</em>. Archive.org. <a href="https://archive.org/stream/lecontredeloretd00khanuoft/lecontredeloretd00khanuoft_djvu.txt" class="uri">https://archive.org/stream/lecontredeloretd00khanuoft/lecontredeloretd00khanuoft_djvu.txt</a>.</p>
</div>
<div id="ref-Lang2008">
<p>Lang, Andrew, ed. 2008. <em>The Arabian Nights Entertainments</em>. Project Gutenberg. <a href="http://www.gutenberg.org/files/128/128-h/128-h.htm" class="uri">http://www.gutenberg.org/files/128/128-h/128-h.htm</a>.</p>
</div>
<div id="ref-Lautreamont2011">
<p>Lautréamont, Comte de. 2011. <em>Les Chants de Maldoror</em>. Project Gutenberg. <a href="http://www.gutenberg.org/files/12005/12005-h/12005-h.htm" class="uri">http://www.gutenberg.org/files/12005/12005-h/12005-h.htm</a>.</p>
</div>
<div id="ref-Levenshtein1966">
<p>Levenshtein, Vladimir I. 1966. “Binary codes capable of correcting deletions, insertions, and reversals.” <em>Soviet Physics Doklady</em> 10 (8): 707–10.</p>
</div>
<div id="ref-Maeterlinck1918">
<p>Maeterlinck, Maurice. 1918. <em>Aglavaine and Selysette</em>. Translated by Alfred Sutro. Archive.org. <a href="https://archive.org/stream/aglavaineandsel01sutrgoog/aglavaineandsel01sutrgoog_djvu.txt" class="uri">https://archive.org/stream/aglavaineandsel01sutrgoog/aglavaineandsel01sutrgoog_djvu.txt</a>.</p>
</div>
<div id="ref-Mallarme2003">
<p>Mallarmé, Stéphane. 2003. <em>Pages</em>. Project Gutenberg. <a href="http://www.gutenberg.org/cache/epub/4688/pg4688-images.html" class="uri">http://www.gutenberg.org/cache/epub/4688/pg4688-images.html</a>.</p>
</div>
<div id="ref-Mendes1910">
<p>Mendès, Catulle. 1910. <em>The Mirror</em>. Edited by Fancis J. Reynolds. Project Gutenberg. <a href="http://www.gutenberg.org/cache/epub/10577/pg10577-images.html" class="uri">http://www.gutenberg.org/cache/epub/10577/pg10577-images.html</a>.</p>
</div>
<div id="ref-Mendes2013">
<p>———. 2013. <em>La Divina Aventura</em>. Edited by E Dentu. <a href="http://www.iesxunqueira1.com/mendes/pdf/divina_aventura.pdf" class="uri">http://www.iesxunqueira1.com/mendes/pdf/divina_aventura.pdf</a>.</p>
</div>
<div id="ref-TranslatorAPI">
<p>“Microsoft Translator - Text Translation. DataMarket.” 2011. Microsoft. <a href="https://datamarket.azure.com/dataset/bing/microsofttranslator" class="uri">https://datamarket.azure.com/dataset/bing/microsofttranslator</a>.</p>
</div>
<div id="ref-Miller1995">
<p>Miller, George A. 1995. “WordNet: a lexical database for English.” <em>Communications of the ACM</em> 38 (11): 39–41. <a href="http://portal.acm.org/citation.cfm?doid=219717.219748" class="uri">http://portal.acm.org/citation.cfm?doid=219717.219748</a>.</p>
</div>
<div id="ref-NLTK2016">
<p>“Natural Language Toolkit. NLTK 3.0 Documentation.” n.d. NLTK Project. <a href="http://www.nltk.org/" class="uri">http://www.nltk.org/</a>.</p>
</div>
<div id="ref-Poe2008">
<p>Poe, Edgar Allan. 2008. <em>The Works of Edgar Allan Poe, Volumes 1-5</em>. Edited by David Widgerm and Carlo Traverso. Project Gutenberg. <a href="http://www.gutenberg.org/ebooks/author/481" class="uri">http://www.gutenberg.org/ebooks/author/481</a>.</p>
</div>
<div id="ref-pythonmain">
<p>“Python.” n.d. Python Software Foundation. <a href="https://www.python.org/" class="uri">https://www.python.org/</a>.</p>
</div>
<div id="ref-Rabelais2004">
<p>Rabelais, François. 2004. <em>Gargantua and Pantagruel</em>. Project Gutenberg. <a href="http://www.gutenberg.org/files/1200/1200-h/1200-h.htm" class="uri">http://www.gutenberg.org/files/1200/1200-h/1200-h.htm</a>.</p>
</div>
<div id="ref-Reitznd">
<p>Reitz, Kenneth. n.d. “Requests. HTTP for Humans.” <a href="http://docs.python-requests.org/en/master/" class="uri">http://docs.python-requests.org/en/master/</a>.</p>
</div>
<div id="ref-Rimbaud2009">
<p>Rimbaud, Arthur. 2009. <em>Poésies Complètes</em>. Project Gutenberg. <a href="http://www.gutenberg.org/files/29302/29302-h/29302-h.htm" class="uri">http://www.gutenberg.org/files/29302/29302-h/29302-h.htm</a>.</p>
</div>
<div id="ref-Jinja2016">
<p>Ronacher, Armin. 2008. “Welcome to Jinja2.” pocoo.org. <a href="http://jinja.pocoo.org/docs/dev/" class="uri">http://jinja.pocoo.org/docs/dev/</a>.</p>
</div>
<div id="ref-Ronacher2016">
<p>———. n.d. “Flask: Web Development, One Drop at a Time.” <a href="http://flask.pocoo.org/" class="uri">http://flask.pocoo.org/</a>.</p>
</div>
<div id="ref-Schwob2012">
<p>Schwob, Marcel. 2012. <em>Der Kinderkreuzzug</em>. Translated by Arthur Seiffhart. Project Gutenberg. <a href="http://www.gutenberg.org/files/39624/39624-h/39624-h.htm" class="uri">http://www.gutenberg.org/files/39624/39624-h/39624-h.htm</a>.</p>
</div>
<div id="ref-GettyAPI">
<p>“Search for Creative Images. Getty Images Api.” n.d. Getty. <a href="http://developers.gettyimages.com/api/docs/v3/search/images/creative/get/" class="uri">http://developers.gettyimages.com/api/docs/v3/search/images/creative/get/</a>.</p>
</div>
<div id="ref-YouTubeAPI">
<p>“Search: list. YouTube Data Api.” n.d. Google. <a href="https://developers.google.com/youtube/v3/docs/search/list" class="uri">https://developers.google.com/youtube/v3/docs/search/list</a>.</p>
</div>
<div id="ref-Shakespeare2011">
<p>Shakespeare, William. 2011. “The Complete Works.” Project Gutenberg. <a href="http://www.gutenberg.org/cache/epub/100/pg100-images.html" class="uri">http://www.gutenberg.org/cache/epub/100/pg100-images.html</a>.</p>
</div>
<div id="ref-Copyright2015">
<p>“UK Copyright Law. Factsheet No. P-01.” 2015. UK Copyright Service. <a href="https://www.copyrightservice.co.uk/ukcs/docs/edupack.pdf" class="uri">https://www.copyrightservice.co.uk/ukcs/docs/edupack.pdf</a>.</p>
</div>
<div id="ref-Verhaeren2010">
<p>Verhaeren, Emile. 2010. <em>Poems</em>. Translated by Alma Strettell. Project Gutenberg. <a href="http://www.gutenberg.org/files/33792/33792-h/33792-h.htm" class="uri">http://www.gutenberg.org/files/33792/33792-h/33792-h.htm</a>.</p>
</div>
<div id="ref-Verlaine2009">
<p>Verlaine, Paul. 2009. <em>Poems</em>. Translated by Gertrude Hall. Project Gutenberg. <a href="http://www.gutenberg.org/files/8426/8426-h/8426-h.htm" class="uri">http://www.gutenberg.org/files/8426/8426-h/8426-h.htm</a>.</p>
</div>
<div id="ref-Verne2010">
<p>Verne, Jules. 2010. “A Journey to the Interior of the Earth.” Project Gutenberg. <a href="http://www.gutenberg.org/cache/epub/3748/pg3748-images.html" class="uri">http://www.gutenberg.org/cache/epub/3748/pg3748-images.html</a>.</p>
</div>
<div id="ref-w3css">
<p>“W3.CSS Tutorial. Faster and Better Responsive Websites.” n.d. W3 Schools. <a href="http://www.w3schools.com/w3css/" class="uri">http://www.w3schools.com/w3css/</a>.</p>
</div>
<div id="ref-Princeton2010">
<p>“What Is Wordnet? WordNet: A Lexical Database for English.” n.d. Princeton University. <a href="http://wordnet.princeton.edu" class="uri">http://wordnet.princeton.edu</a>.</p>
</div>
</div>
</section>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Python, HTML, CSS, Jinja, JavaScript<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>Microsoft Translate, WordNet, Bing, Getty, Flickr and YouTube<a href="#fnref2">↩</a></p></li>
<li id="fn3"><p>2864 lines of code, 489 lines of comments - as of 08 Dec 2015<a href="#fnref3">↩</a></p></li>
<li id="fn4"><p>I have not been able to find any source texts online.[emptyfile]<a href="#fnref4">↩</a></p></li>
<li id="fn5"><p>This is addressed in chapter [s:textfuture].<a href="#fnref5">↩</a></p></li>
</ol>
</section>
<nav class="mainnav">
  <a class="left" href="part4.html">Prev</a>
  <a class="centre" href="contents.html">Contents</a>
  <a class="right" href="applications.html">Next</a>
</nav>
</body>

<script>
(function() {
    var pre = document.getElementsByTagName('pre'),
        pl = pre.length;
    for (var i = 0; i < pl; i++) {
        pre[i].innerHTML = '<span class="line-number"></span>' + pre[i].innerHTML + '<span class="cl"></span>';
        var num = pre[i].innerHTML.split(/\n/).length;
        for (var j = 0; j < num; j++) {
            var line_num = pre[i].getElementsByTagName('span')[0];
            line_num.innerHTML += '<span>' + (j + 1) + '</span>';
        }
    }
})();
</script>

</html>
